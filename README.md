# SecurePic : 이미지 내 특정 정보를 탐지하여 삭제하는 시스템

> **2024 예비캡스톤 프로젝트 (11조)**
> **이미지 내 개인정보(주민등록증, 주소 등)와 기밀 정보를 AI가 자동으로 탐지하여 블러 처리하는 보안 솔루션**

<br>

## 시연 영상 링크
* https://youtu.be/NNCPHXUK3mg

<br>

## 프로젝트 개요
소셜 미디어에 이미지를 업로드하기 전 의도치 않게 포함된 **개인정보 및 기밀 정보를 자동으로 탐지하고 삭제(마스킹)** 하여 정보 유출을 방지하는 시스템입니다.
사용자가 이미지를 업로드하면 AI가 텍스트와 객체를 분석하여 민감 정보를 찾아내고 사용자의 선택에 따라 해당 영역을 블러 처리하여 안전한 이미지를 반환합니다.

<br>

## 담당 역할
**11조(총 3명) 중 [프론트엔드 및 AI 모델 튜닝] 담당 (기여도: 40%)**

### 1. AI 및 데이터 엔지니어링

> 관련 코드: 'ai_core/image_processor.ipynb' 파일 내 OCR 및 XGBoost 관련 로직

* **가상 데이터 생성 및 라벨링:**
  * 보안 문제로 확보가 어려운 주민등록증 실물 데이터 대신 실제와 유사한 **가상 데이터를 생성**하여 학습 데이터셋을 구축하고 라벨링 수행
  * 회전, 크기 조절, 밝기 변형 등을 적용한 데이터 증강 작업을 통해 YOLOv5 학습 데이터 부족 문제 해결
* **OCR 파이프라인 설계:**
  * 텍스트 탐지를 위한 **PaddleOCR** 모델 구조 설계 및 마진 조정을 통한 인식률 최적화
* **모델 성능 최적화 (Hyperparameter Tuning):**
  * XGBoost 텍스트 분류 모델의 성능을 향상하기 위해 **Optuna** 프레임워크 도입
  * 기존 Grid Search 대비 효율적으로 'max_depth', 'learning_rate' 등 주요 파라미터를 자동 최적화하여 튜닝 시간 단축 및 성능 향상

### 2. 프론트엔드 개발

> 관련 코드: 'SecurePic_System/src/main/resources/' 내 'static', 'templates' 폴더

* **UI/UX 디자인 및 구현:**
  * HTML/CSS/JavaScript를 활용하여 직관적인 이미지 업로드 초기 화면 및 결과 확인 페이지 전체 디자인 및 구현
* **동적 마스킹 기능 (Interactive Features):**
  * 사용자가 블러 처리된 결과를 확인하고 원하는 위치를 **재선택(수정)하거나 해제할 수 있는 동적 UI 기능** 개발

<br>

## Tech Stack
| Category | Tech |
| :--- | :--- |
| **Frontend** | HTML, CSS, JavaScript |
| **Backend** | Java, Spring Boot |
| **AI Serving** | Python, Flask |
| **AI Model** | YOLOv5, PaddleOCR, Tesseract OCR, XGBoost |
| **Tools** | Postman, Optuna |

<br>

## 시스템 아키텍처
<img width="100%" alt="image" src="https://github.com/user-attachments/assets/f9ac2204-30db-41cc-9bca-7e422a2e11c2" />

1. 사용자가 이미지를 업로드하면 Spring Boot 서버가 수신
2. Spring Boot가 Flask 서버로 이미지 분석 요청 (API)
3. Flask 서버에서 **YOLOv5(객체 탐지)** 및 **OCR(텍스트 추출)** 수행
4. 탐지된 민감 정보 좌표를 반환하여 마스킹 처리 후 결과 전송

YOLOv5는 이미지 내 문서 영역 및 민감 정보가 포함될 가능성이 높은 객체를 1차적으로 탐지하고 해당 영역에 대해서만 OCR 기반 세부 텍스트 분석을 수행하는 전처리 필터 역할로 사용되었습니다. 이를 통해 전체 이미지에 OCR을 적용하는 방식 대비 불필요한 연산을 줄이고 민감 정보가 존재할 가능성이 높은 영역에 분석을 집중하도록 설계했습니다.

> Note: 본 레포지토리에는 전체 시스템 구동을 보여주기 위해 팀원이 개발한 Spring Boot 백엔드 서버 코드가 포함되어 있습니다. (Backend Reference)

<br>

## 핵심 기능
* **민감 정보 자동 탐지:** 주민등록번호, 주소, 전화번호 등 개인정보 식별
* **보안 지역 감지:** 군사 시설, 국가 보안 시설 등 촬영 금지 구역 탐지 (GPU 위치 기반)
* **선택적 마스킹:** AI가 추천한 블러 영역을 사용자가 확인하고 최종 편집 가능
* **하이브리드 OCR:** PaddleOCR의 인식률 한계를 보완하기 위해 TesseractOCR 병행 사용

<br>

## Trouble Shooting (기술적 문제 해결)

### 1. Spring Boot ↔ Flask 데이터 통신 불일치 해결
* **문제:** 서로 다른 프레임워크 간 통신 시, JSON 파싱 오류 및 Multipart 데이터 누락 발생
* **해결:**
    * API 계약(Contract) 문서를 작성하여 데이터 입출력 형식을 엄격하게 정의
    * Spring Boot의 Multipart 전송 로직을 재설계하고, Flask 측의 유효성 검사(Validation) 로직 강화

### 2. YOLOv5 학습 데이터 부족 (Data Augmentation)
* **문제:** 실제 주민등록증이나 여권 등 민감 정보 데이터셋은 보안상 확보가 불가능하여 모델 성능 저하
* **해결:**
    * 실제와 유사한 **가상(Synthetic) 데이터**를 생성하여 학습 데이터 확보
    * 회전, 밝기 조절, 노이즈 추가 등 다양한 변수를 반영한 데이터 증강(Augmentation) 기법 적용

### 3. OCR 문장부호 인식률 개선 (Hybrid OCR)
* **문제:** PaddleOCR가 한글 인식은 우수하나, 특수문자(온점, 괄호 등) 인식률이 현저히 떨어짐
* **해결:**
    * 이미지 전처리(확대, 히스토그램 평활화)로 입력 품질 개선
    * 특수문자 인식에 강점이 있는 **Tesseract OCR**을 보조적으로 도입하여, 두 모델의 결과를 교차 검증하는 하이브리드 방식 적용
    * Hybrid OCR 적용 전에는 특수문자 누락이 빈번했으나 Tesseract OCR 병행 이후 문장 단위 인식 실패 사례가 유의미하게 감소

### 4. XGBoost 성능 최적화 (Optuna)
* **문제:**
    * 단순 정규식 기반 분류는 숫자 패턴이 유사한 항목(전화번호, 주민번호, 날짜 등) 간 오탐이 잦아 텍스트 기반 민감 정보 분류에 한계가 있었음
    * 이에 따라 문맥 및 패턴 특징을 함께 학습할 수 있는 분류 모델이 필요했음
    * 텍스트 분류 정확도를 높이기 위한 하이퍼파라미터 튜닝 시, Grid Search는 시간이 너무 오래 걸림
* **해결:**
    * **Optuna (Bayesian Optimization)** 프레임워크를 도입
    * `max_depth`, `learning_rate` 등 주요 파라미터를 효율적으로 탐색하여 학습 시간을 단축하면서도 번호, 날짜 계열과 같이 형식이 유사한 개인정보 항목 간 혼동 해소

> Note on Evaluation:
본 프로젝트는 실제 개인정보 데이터를 사용할 수 없는 제약 환경에서 진행되어 일반적인 정량 성능 지표를 통한 모델 비교는 수행하지 않았습니다. 대신, 시연 시나리오 기반 테스트를 통해 민감 정보 탐지 → 사용자 확인 → 선택적 마스킹까지의 전체 파이프라인 동작 여부를 검증하는 데 초점을 두었습니다.

<br>

## 기대 효과
* **정보 유출 방지:** 공공기관, 군사 시설, 기업 등에서의 보안 사고 예방
* **업무 효율화:** 수작업으로 진행되던 보안 검토 시간을 획기적으로 단축
* **인적 오류 최소화:** 일관된 AI 기준 적용으로 검열 누락 방지

<br>

## 향후 과제
* 저화질 이미지에 대한 탐지 성능 개선
* 실시간 영상(Video) 마스킹 처리 기능 확장
* 사용자 세션 관리를 위한 DB 구축 및 운영 환경 배포
